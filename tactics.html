<!doctype html>
<html lang="vi">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Chiến thuật – Chess Overview</title>
<meta name="description" content="Các motif chiến thuật cơ bản: Fork, Pin, Skewer, Discovered, Mate net – với thế cờ minh họa.">
<style>
  :root{--bg:#0b1220;--card:#0f172a;--ink:#e6eef7;--muted:#9bb0cf;--border:#1f2a44;--accent:#22c55e}
  *{box-sizing:border-box} body{margin:0;background:linear-gradient(180deg,#0a1120,#0b1220);color:var(--ink);font:16px/1.55 system-ui,Inter}
  header,footer{border-bottom:1px solid var(--border);background:rgba(10,16,32,.6);backdrop-filter:blur(6px)}
  header{position:sticky;top:0;z-index:3}
  .wrap{max-width:1050px;margin:auto;padding:18px}
  h1{margin:0;font-size:clamp(18px,2.6vw,24px)} .sub{color:var(--muted)}
  .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:12px}
  .card{background:var(--card);border:1px solid var(--border);border-radius:14px;padding:12px}
  .board{font:24px/1.05 "Noto Sans Symbols 2","Segoe UI Symbol",system-ui;display:inline-grid;grid-template-columns:repeat(8,1em);gap:0;background:#0a1224;padding:8px;border-radius:10px;border:1px solid var(--border)}
  .sq{width:1em;height:1em;display:grid;place-items:center}
  .l{background:#e6eef7;color:#0a1224}.d{background:#7a98c9;color:#0a1224}
  .pgn{font:14px ui-monospace,Consolas;background:#0c1630;border:1px solid var(--border);border-radius:10px;padding:8px;white-space:pre-wrap}
  .hint{color:var(--muted)}
  footer{margin-top:18px;padding:12px;color:var(--muted);text-align:center;border-top:1px solid var(--border)}
</style>
</head>
<body>
<header><div class="wrap"><h1>🧠 Chiến thuật <span class="sub">— motif & thế cờ minh họa</span></h1></div></header>
<main class="wrap">
  <p class="hint">Mẹo: Hãy tìm <b>nước bắt buộc</b>, <b>quân treo</b> và <b>đường chéo/hàng/cột</b> mở.</p>
  <div id="grid" class="grid"></div>
</main>
<footer>© 2025 • Chiến thuật – Chess Overview</footer>

<script>
const UNI={'P':'♙','N':'♘','B':'♗','R':'♖','Q':'♕','K':'♔','p':'♟','n':'♞','b':'♝','r':'♜','q':'♛','k':'♚'};
const PUZZLES=[
  {id:"fork-1", name:"Fork (Chĩa)", fen:"r1bqkbnr/pppp1ppp/2n5/4p3/1bP1P3/2N2N2/PP1P1PPP/R1BQKB1R w KQkq - 2 5", best:"Nd5", hint:"Tạo đòn ngựa chĩa c7/e7."},
  {id:"pin-1", name:"Pin (Ghim)", fen:"rnbqkbnr/pppp1ppp/8/4p3/3P4/5N2/PPP1PPPP/RNBQKB1R b KQkq - 1 2", best:"e4", hint:"Đẩy tốt để ghim & mở đường."},
  {id:"skewer-1", name:"Skewer (Xiên)", fen:"4k3/8/8/8/2q5/8/4Q3/4K3 w - - 0 1", best:"Qxc4", hint:"Đổi hướng để ăn hậu."},
  {id:"disc-1", name:"Discovered attack", fen:"r1bq1rk1/ppp2ppp/2n2n2/3P4/2B1P3/2N2N2/PPP2PPP/R1BQ1RK1 w - - 0 1", best:"dxc6 (…Qxd1) Rxd1", hint:"Mở đường tấn công hở."},
  {id:"mate-1", name:"Mate in 1", fen:"6k1/8/8/8/8/8/5PPP/6K1 w - - 0 1", best:"Qg7#", hint:"Lưới chiếu hết trên hàng 7/8."}
];

const grid=document.getElementById("grid");
for(const p of PUZZLES){
  const card=document.createElement("div"); card.className="card";
  card.innerHTML=`
    <h3 style="margin:0">${p.name} <small class="hint">• ID: ${p.id}</small></h3>
    <div style="display:flex;gap:12px;align-items:flex-start;flex-wrap:wrap;margin-top:8px">
      ${render(p.fen)}
      <div style="flex:1;min-width:220px">
        <div class="pgn">Bên đi: ${side(p.fen)} • Nước tốt nhất: <b>${p.best}</b></div>
        <p class="hint">Gợi ý: ${p.hint}</p>
      </div>
    </div>
  `;
  grid.appendChild(card);
}

function side(fen){ return fen.split(" ")[1]==="w"?"Trắng":"Đen"; }
function render(fen){
  const pos=fen.split(" ")[0]; const rows=pos.split("/");
  let html=`<div class="board">`;
  for(let r=0;r<8;r++){
    const row=rows[r];
    let c=0;
    for(const ch of row){
      if(/\d/.test(ch)){ const n=parseInt(ch,10); for(let i=0;i<n;i++) html+=sq(r,c++,"") }
      else{ html+=sq(r,c++, UNI[ch]||"") }
    }
  }
  html+=`</div>`; return html;
}
function sq(r,c,txt){ const light=((7-r+c)%2===0); return `<div class="sq ${light?'l':'d'}">${txt||""}</div>`; }
</script>
</body>
</html>
